{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/\\u0434\\u0438\\u043F\\u043B\\u043E\\u043C/client/src/pages/ProductDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { CartContext } from '../context/CartContext';\nimport { fetchWithRetry } from '../utils/apiUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_IMAGE = 'https://via.placeholder.com/600x400?text=Конфетти';\n\n// Функция для форматирования даты\nconst formatDate = dateString => {\n  if (!dateString) return 'Не указан';\n  try {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ru-RU');\n  } catch (error) {\n    console.error('Ошибка форматирования даты:', error);\n    return 'Ошибка даты';\n  }\n};\n\n// Функция для проверки истечения срока годности\nconst getExpiryStatus = expiryDate => {\n  if (!expiryDate) return {\n    status: 'no-date',\n    text: 'Не указан',\n    color: 'gray'\n  };\n  const now = new Date();\n  const expiry = new Date(expiryDate);\n  const diffTime = expiry - now;\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  if (diffDays < 0) {\n    return {\n      status: 'expired',\n      text: 'Истек',\n      color: 'red'\n    };\n  } else if (diffDays <= 7) {\n    return {\n      status: 'expiring-soon',\n      text: `Истекает через ${diffDays} дн.`,\n      color: 'orange'\n    };\n  } else {\n    return {\n      status: 'valid',\n      text: `Истекает ${formatDate(expiryDate)}`,\n      color: 'green'\n    };\n  }\n};\nconst ProductDetailPage = () => {\n  _s();\n  var _product$category;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    addToCart\n  } = useContext(CartContext);\n  const [product, setProduct] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [relatedProducts, setRelatedProducts] = useState([]);\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        try {\n          const data = await fetchWithRetry(`products/${id}`);\n          setProduct(data);\n\n          // Получаем связанные товары из той же категории\n          const relatedData = await fetchWithRetry(`products?category=${data.categoryId}`);\n          setRelatedProducts(relatedData.filter(item => item.id !== data.id).slice(0, 3));\n        } catch (err) {\n          console.error('Ошибка загрузки товара:', err);\n          let errorMessage = 'Товар не найден или произошла ошибка при загрузке.';\n          // Пытаемся извлечь более подробную информацию об ошибке\n          try {\n            const parsedError = JSON.parse(err.message);\n            if (parsedError.data && parsedError.data.error) {\n              errorMessage = parsedError.data.error;\n            } else if (parsedError.message) {\n              errorMessage = parsedError.message;\n            }\n          } catch (parseError) {\n            // Если не удалось распарсить, используем исходное сообщение\n            errorMessage = err.message || errorMessage;\n          }\n          setError(errorMessage);\n        }\n        setLoading(false);\n      } catch (err) {\n        console.error('Неожиданная ошибка:', err);\n        setError('Произошла непредвиденная ошибка. Пожалуйста, обновите страницу.');\n        setLoading(false);\n      }\n    };\n    fetchProduct();\n  }, [id]);\n  const handleQuantityChange = e => {\n    const value = parseInt(e.target.value);\n    if (value > 0) {\n      setQuantity(value);\n    }\n  };\n  const handleAddToCart = () => {\n    addToCart(product, quantity);\n    navigate('/cart');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-12 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-block w-8 h-8 border-4 border-pink-500 border-t-transparent rounded-full animate-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 text-gray-600\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n  if (error || !product) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 text-red-700 p-6 rounded-lg text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-2\",\n          children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error || 'Товар не найден'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/products\",\n          className: \"btn btn-primary mt-4 inline-block\",\n          children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A \\u0441\\u043F\\u0438\\u0441\\u043A\\u0443 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex\",\n        \"aria-label\": \"Breadcrumb\",\n        children: /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"inline-flex items-center space-x-1 md:space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"inline-flex items-center\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"text-gray-600 hover:text-pink-500\",\n              children: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-6 h-6 text-gray-400\",\n                fill: \"currentColor\",\n                viewBox: \"0 0 20 20\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\",\n                  clipRule: \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products\",\n                className: \"ml-1 text-gray-600 hover:text-pink-500 md:ml-2\",\n                children: \"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-6 h-6 text-gray-400\",\n                fill: \"currentColor\",\n                viewBox: \"0 0 20 20\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\",\n                  clipRule: \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/products?category=${product.categoryId}`,\n                className: \"ml-1 text-gray-600 hover:text-pink-500 md:ml-2\",\n                children: ((_product$category = product.category) === null || _product$category === void 0 ? void 0 : _product$category.name) || 'Категория'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            \"aria-current\": \"page\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-6 h-6 text-gray-400\",\n                fill: \"currentColor\",\n                viewBox: \"0 0 20 20\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\",\n                  clipRule: \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-1 text-gray-500 md:ml-2\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-lg overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:w-1/2\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.imageUrl || DEFAULT_IMAGE,\n            alt: product.name,\n            className: \"w-full h-full object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 md:w-1/2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-gray-800 mb-2\",\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), product.category && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"inline-block bg-pink-100 text-pink-600 px-2 py-1 rounded-full text-sm\",\n              children: product.category.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl font-bold text-gray-800\",\n              children: [product.price.toFixed(2), \" \\u20BD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold text-gray-800 mb-2\",\n              children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: product.description || 'Описание товара отсутствует.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold text-gray-800 mb-2\",\n              children: \"\\u0421\\u0440\\u043E\\u043A \\u0433\\u043E\\u0434\\u043D\\u043E\\u0441\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), (() => {\n              const status = getExpiryStatus(product.expiryDate);\n              const colorClasses = {\n                red: 'bg-red-100 text-red-800 border-red-200',\n                orange: 'bg-orange-100 text-orange-800 border-orange-200',\n                green: 'bg-green-100 text-green-800 border-green-200',\n                gray: 'bg-gray-100 text-gray-800 border-gray-200'\n              };\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `inline-flex items-center px-3 py-2 rounded-lg border ${colorClasses[status.color]}`,\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5 mr-2\",\n                  fill: \"currentColor\",\n                  viewBox: \"0 0 20 20\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: status.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this);\n            })()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"quantity\",\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"w-10 h-10 rounded-l-md bg-gray-200 flex items-center justify-center text-gray-700 hover:bg-gray-300\",\n                onClick: () => quantity > 1 && setQuantity(quantity - 1),\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"quantity\",\n                name: \"quantity\",\n                min: \"1\",\n                value: quantity,\n                onChange: handleQuantityChange,\n                className: \"h-10 w-16 border-gray-300 text-center focus:ring-pink-500 focus:border-pink-500 sm:text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"w-10 h-10 rounded-r-md bg-gray-200 flex items-center justify-center text-gray-700 hover:bg-gray-300\",\n                onClick: () => setQuantity(quantity + 1),\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleAddToCart,\n              className: \"btn btn-primary flex-grow py-3\",\n              children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/products\",\n              className: \"btn btn-secondary py-3\",\n              children: \"\\u041D\\u0430\\u0437\\u0430\\u0434 \\u043A \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\\u0443\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), relatedProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-800 mb-6\",\n        children: \"\\u041F\\u043E\\u0445\\u043E\\u0436\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\",\n        children: relatedProducts.map(relatedProduct => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/products/${relatedProduct.id}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative pb-[66.666%] overflow-hidden\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: relatedProduct.imageUrl || DEFAULT_IMAGE,\n                alt: relatedProduct.name,\n                className: \"absolute h-full w-full object-cover transition-transform duration-500 hover:scale-105\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: `/products/${relatedProduct.id}`,\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-gray-800 hover:text-pink-500 transition-colors mb-2\",\n                children: relatedProduct.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl font-bold text-gray-800\",\n              children: [relatedProduct.price.toFixed(2), \" \\u20BD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 17\n          }, this)]\n        }, relatedProduct.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductDetailPage, \"JcZmnlq55XFcrIlhOicCb6yqbO4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ProductDetailPage;\nexport default ProductDetailPage;\nvar _c;\n$RefreshReg$(_c, \"ProductDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","Link","CartContext","fetchWithRetry","jsxDEV","_jsxDEV","DEFAULT_IMAGE","formatDate","dateString","date","Date","toLocaleDateString","error","console","getExpiryStatus","expiryDate","status","text","color","now","expiry","diffTime","diffDays","Math","ceil","ProductDetailPage","_s","_product$category","id","navigate","addToCart","product","setProduct","quantity","setQuantity","loading","setLoading","setError","relatedProducts","setRelatedProducts","fetchProduct","data","relatedData","categoryId","filter","item","slice","err","errorMessage","parsedError","JSON","parse","message","parseError","handleQuantityChange","e","value","parseInt","target","handleAddToCart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","fill","viewBox","xmlns","fillRule","d","clipRule","category","name","src","imageUrl","alt","price","toFixed","description","colorClasses","red","orange","green","gray","htmlFor","type","onClick","min","onChange","length","map","relatedProduct","_c","$RefreshReg$"],"sources":["/Users/apple/Desktop/диплом/client/src/pages/ProductDetailPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { CartContext } from '../context/CartContext';\nimport { fetchWithRetry } from '../utils/apiUtils';\n\nconst DEFAULT_IMAGE = 'https://via.placeholder.com/600x400?text=Конфетти';\n\n// Функция для форматирования даты\nconst formatDate = (dateString) => {\n  if (!dateString) return 'Не указан';\n  \n  try {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ru-RU');\n  } catch (error) {\n    console.error('Ошибка форматирования даты:', error);\n    return 'Ошибка даты';\n  }\n};\n\n// Функция для проверки истечения срока годности\nconst getExpiryStatus = (expiryDate) => {\n  if (!expiryDate) return { status: 'no-date', text: 'Не указан', color: 'gray' };\n  \n  const now = new Date();\n  const expiry = new Date(expiryDate);\n  const diffTime = expiry - now;\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  \n  if (diffDays < 0) {\n    return { status: 'expired', text: 'Истек', color: 'red' };\n  } else if (diffDays <= 7) {\n    return { status: 'expiring-soon', text: `Истекает через ${diffDays} дн.`, color: 'orange' };\n  } else {\n    return { status: 'valid', text: `Истекает ${formatDate(expiryDate)}`, color: 'green' };\n  }\n};\n\nconst ProductDetailPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { addToCart } = useContext(CartContext);\n  \n  const [product, setProduct] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [relatedProducts, setRelatedProducts] = useState([]);\n  \n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        try {\n          const data = await fetchWithRetry(`products/${id}`);\n          setProduct(data);\n          \n          // Получаем связанные товары из той же категории\n          const relatedData = await fetchWithRetry(`products?category=${data.categoryId}`);\n          setRelatedProducts(relatedData.filter(item => item.id !== data.id).slice(0, 3));\n        } catch (err) {\n          console.error('Ошибка загрузки товара:', err);\n          \n          let errorMessage = 'Товар не найден или произошла ошибка при загрузке.';\n          // Пытаемся извлечь более подробную информацию об ошибке\n          try {\n            const parsedError = JSON.parse(err.message);\n            if (parsedError.data && parsedError.data.error) {\n              errorMessage = parsedError.data.error;\n            } else if (parsedError.message) {\n              errorMessage = parsedError.message;\n            }\n          } catch (parseError) {\n            // Если не удалось распарсить, используем исходное сообщение\n            errorMessage = err.message || errorMessage;\n          }\n          \n          setError(errorMessage);\n        }\n        \n        setLoading(false);\n      } catch (err) {\n        console.error('Неожиданная ошибка:', err);\n        setError('Произошла непредвиденная ошибка. Пожалуйста, обновите страницу.');\n        setLoading(false);\n      }\n    };\n    \n    fetchProduct();\n  }, [id]);\n  \n  const handleQuantityChange = (e) => {\n    const value = parseInt(e.target.value);\n    if (value > 0) {\n      setQuantity(value);\n    }\n  };\n  \n  const handleAddToCart = () => {\n    addToCart(product, quantity);\n    navigate('/cart');\n  };\n  \n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-12 text-center\">\n        <div className=\"inline-block w-8 h-8 border-4 border-pink-500 border-t-transparent rounded-full animate-spin\"></div>\n        <p className=\"mt-2 text-gray-600\">Загрузка товара...</p>\n      </div>\n    );\n  }\n  \n  if (error || !product) {\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"bg-red-100 text-red-700 p-6 rounded-lg text-center\">\n          <h2 className=\"text-2xl font-bold mb-2\">Ошибка</h2>\n          <p>{error || 'Товар не найден'}</p>\n          <Link to=\"/products\" className=\"btn btn-primary mt-4 inline-block\">\n            Вернуться к списку товаров\n          </Link>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* Навигационные хлебные крошки */}\n      <div className=\"mb-6\">\n        <nav className=\"flex\" aria-label=\"Breadcrumb\">\n          <ol className=\"inline-flex items-center space-x-1 md:space-x-3\">\n            <li className=\"inline-flex items-center\">\n              <Link to=\"/\" className=\"text-gray-600 hover:text-pink-500\">\n                Главная\n              </Link>\n            </li>\n            <li>\n              <div className=\"flex items-center\">\n                <svg\n                  className=\"w-6 h-6 text-gray-400\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 20 20\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n                    clipRule=\"evenodd\"\n                  ></path>\n                </svg>\n                <Link to=\"/products\" className=\"ml-1 text-gray-600 hover:text-pink-500 md:ml-2\">\n                  Каталог\n                </Link>\n              </div>\n            </li>\n            <li>\n              <div className=\"flex items-center\">\n                <svg\n                  className=\"w-6 h-6 text-gray-400\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 20 20\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n                    clipRule=\"evenodd\"\n                  ></path>\n                </svg>\n                <Link \n                  to={`/products?category=${product.categoryId}`} \n                  className=\"ml-1 text-gray-600 hover:text-pink-500 md:ml-2\"\n                >\n                  {product.category?.name || 'Категория'}\n                </Link>\n              </div>\n            </li>\n            <li aria-current=\"page\">\n              <div className=\"flex items-center\">\n                <svg\n                  className=\"w-6 h-6 text-gray-400\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 20 20\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n                    clipRule=\"evenodd\"\n                  ></path>\n                </svg>\n                <span className=\"ml-1 text-gray-500 md:ml-2\">{product.name}</span>\n              </div>\n            </li>\n          </ol>\n        </nav>\n      </div>\n      \n      {/* Основная информация о товаре */}\n      <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\n        <div className=\"md:flex\">\n          <div className=\"md:w-1/2\">\n            <img\n              src={product.imageUrl || DEFAULT_IMAGE}\n              alt={product.name}\n              className=\"w-full h-full object-cover\"\n            />\n          </div>\n          <div className=\"p-6 md:w-1/2\">\n            <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">{product.name}</h1>\n            \n            {product.category && (\n              <div className=\"mb-4\">\n                <span className=\"inline-block bg-pink-100 text-pink-600 px-2 py-1 rounded-full text-sm\">\n                  {product.category.name}\n                </span>\n              </div>\n            )}\n            \n            <div className=\"mb-6\">\n              <span className=\"text-3xl font-bold text-gray-800\">{product.price.toFixed(2)} ₽</span>\n            </div>\n            \n            <div className=\"mb-6\">\n              <h2 className=\"text-lg font-semibold text-gray-800 mb-2\">Описание</h2>\n              <p className=\"text-gray-600\">\n                {product.description || 'Описание товара отсутствует.'}\n              </p>\n            </div>\n            \n            {/* Информация о сроке годности */}\n            <div className=\"mb-6\">\n              <h2 className=\"text-lg font-semibold text-gray-800 mb-2\">Срок годности</h2>\n              {(() => {\n                const status = getExpiryStatus(product.expiryDate);\n                const colorClasses = {\n                  red: 'bg-red-100 text-red-800 border-red-200',\n                  orange: 'bg-orange-100 text-orange-800 border-orange-200',\n                  green: 'bg-green-100 text-green-800 border-green-200',\n                  gray: 'bg-gray-100 text-gray-800 border-gray-200'\n                };\n                \n                return (\n                  <div className={`inline-flex items-center px-3 py-2 rounded-lg border ${colorClasses[status.color]}`}>\n                    <svg className=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span className=\"font-medium\">{status.text}</span>\n                  </div>\n                );\n              })()}\n            </div>\n            \n            <div className=\"mb-6\">\n              <label htmlFor=\"quantity\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Количество\n              </label>\n              <div className=\"flex items-center\">\n                <button\n                  type=\"button\"\n                  className=\"w-10 h-10 rounded-l-md bg-gray-200 flex items-center justify-center text-gray-700 hover:bg-gray-300\"\n                  onClick={() => quantity > 1 && setQuantity(quantity - 1)}\n                >\n                  -\n                </button>\n                <input\n                  type=\"number\"\n                  id=\"quantity\"\n                  name=\"quantity\"\n                  min=\"1\"\n                  value={quantity}\n                  onChange={handleQuantityChange}\n                  className=\"h-10 w-16 border-gray-300 text-center focus:ring-pink-500 focus:border-pink-500 sm:text-sm\"\n                />\n                <button\n                  type=\"button\"\n                  className=\"w-10 h-10 rounded-r-md bg-gray-200 flex items-center justify-center text-gray-700 hover:bg-gray-300\"\n                  onClick={() => setQuantity(quantity + 1)}\n                >\n                  +\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-4\">\n              <button\n                type=\"button\"\n                onClick={handleAddToCart}\n                className=\"btn btn-primary flex-grow py-3\"\n              >\n                Добавить в корзину\n              </button>\n              <Link to=\"/products\" className=\"btn btn-secondary py-3\">\n                Назад к каталогу\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Похожие товары */}\n      {relatedProducts.length > 0 && (\n        <div className=\"mt-12\">\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">Похожие товары</h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {relatedProducts.map(relatedProduct => (\n              <div key={relatedProduct.id} className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n                <Link to={`/products/${relatedProduct.id}`}>\n                  <div className=\"relative pb-[66.666%] overflow-hidden\">\n                    <img\n                      src={relatedProduct.imageUrl || DEFAULT_IMAGE}\n                      alt={relatedProduct.name}\n                      className=\"absolute h-full w-full object-cover transition-transform duration-500 hover:scale-105\"\n                    />\n                  </div>\n                </Link>\n                <div className=\"p-4\">\n                  <Link to={`/products/${relatedProduct.id}`}>\n                    <h3 className=\"text-lg font-semibold text-gray-800 hover:text-pink-500 transition-colors mb-2\">\n                      {relatedProduct.name}\n                    </h3>\n                  </Link>\n                  <p className=\"text-xl font-bold text-gray-800\">{relatedProduct.price.toFixed(2)} ₽</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProductDetailPage; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,SAAS,EAAEC,WAAW,EAAEC,IAAI,QAAQ,kBAAkB;AAC/D,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,cAAc,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,MAAMC,aAAa,GAAG,mDAAmD;;AAEzE;AACA,MAAMC,UAAU,GAAIC,UAAU,IAAK;EACjC,IAAI,CAACA,UAAU,EAAE,OAAO,WAAW;EAEnC,IAAI;IACF,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;IACjC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,CAAC;EACzC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnD,OAAO,aAAa;EACtB;AACF,CAAC;;AAED;AACA,MAAME,eAAe,GAAIC,UAAU,IAAK;EACtC,IAAI,CAACA,UAAU,EAAE,OAAO;IAAEC,MAAM,EAAE,SAAS;IAAEC,IAAI,EAAE,WAAW;IAAEC,KAAK,EAAE;EAAO,CAAC;EAE/E,MAAMC,GAAG,GAAG,IAAIT,IAAI,CAAC,CAAC;EACtB,MAAMU,MAAM,GAAG,IAAIV,IAAI,CAACK,UAAU,CAAC;EACnC,MAAMM,QAAQ,GAAGD,MAAM,GAAGD,GAAG;EAC7B,MAAMG,QAAQ,GAAGC,IAAI,CAACC,IAAI,CAACH,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;EAE5D,IAAIC,QAAQ,GAAG,CAAC,EAAE;IAChB,OAAO;MAAEN,MAAM,EAAE,SAAS;MAAEC,IAAI,EAAE,OAAO;MAAEC,KAAK,EAAE;IAAM,CAAC;EAC3D,CAAC,MAAM,IAAII,QAAQ,IAAI,CAAC,EAAE;IACxB,OAAO;MAAEN,MAAM,EAAE,eAAe;MAAEC,IAAI,EAAE,kBAAkBK,QAAQ,MAAM;MAAEJ,KAAK,EAAE;IAAS,CAAC;EAC7F,CAAC,MAAM;IACL,OAAO;MAAEF,MAAM,EAAE,OAAO;MAAEC,IAAI,EAAE,YAAYV,UAAU,CAACQ,UAAU,CAAC,EAAE;MAAEG,KAAK,EAAE;IAAQ,CAAC;EACxF;AACF,CAAC;AAED,MAAMO,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,iBAAA;EAC9B,MAAM;IAAEC;EAAG,CAAC,GAAG7B,SAAS,CAAC,CAAC;EAC1B,MAAM8B,QAAQ,GAAG7B,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAE8B;EAAU,CAAC,GAAGhC,UAAU,CAACI,WAAW,CAAC;EAE7C,MAAM,CAAC6B,OAAO,EAAEC,UAAU,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACqC,QAAQ,EAAEC,WAAW,CAAC,GAAGtC,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACuC,OAAO,EAAEC,UAAU,CAAC,GAAGxC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACgB,KAAK,EAAEyB,QAAQ,CAAC,GAAGzC,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC0C,eAAe,EAAEC,kBAAkB,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC;EAE1DC,SAAS,CAAC,MAAM;IACd,MAAM2C,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACFJ,UAAU,CAAC,IAAI,CAAC;QAChBC,QAAQ,CAAC,IAAI,CAAC;QAEd,IAAI;UACF,MAAMI,IAAI,GAAG,MAAMtC,cAAc,CAAC,YAAYyB,EAAE,EAAE,CAAC;UACnDI,UAAU,CAACS,IAAI,CAAC;;UAEhB;UACA,MAAMC,WAAW,GAAG,MAAMvC,cAAc,CAAC,qBAAqBsC,IAAI,CAACE,UAAU,EAAE,CAAC;UAChFJ,kBAAkB,CAACG,WAAW,CAACE,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACjB,EAAE,KAAKa,IAAI,CAACb,EAAE,CAAC,CAACkB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACjF,CAAC,CAAC,OAAOC,GAAG,EAAE;UACZlC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEmC,GAAG,CAAC;UAE7C,IAAIC,YAAY,GAAG,oDAAoD;UACvE;UACA,IAAI;YACF,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAACK,OAAO,CAAC;YAC3C,IAAIH,WAAW,CAACR,IAAI,IAAIQ,WAAW,CAACR,IAAI,CAAC7B,KAAK,EAAE;cAC9CoC,YAAY,GAAGC,WAAW,CAACR,IAAI,CAAC7B,KAAK;YACvC,CAAC,MAAM,IAAIqC,WAAW,CAACG,OAAO,EAAE;cAC9BJ,YAAY,GAAGC,WAAW,CAACG,OAAO;YACpC;UACF,CAAC,CAAC,OAAOC,UAAU,EAAE;YACnB;YACAL,YAAY,GAAGD,GAAG,CAACK,OAAO,IAAIJ,YAAY;UAC5C;UAEAX,QAAQ,CAACW,YAAY,CAAC;QACxB;QAEAZ,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC,CAAC,OAAOW,GAAG,EAAE;QACZlC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEmC,GAAG,CAAC;QACzCV,QAAQ,CAAC,iEAAiE,CAAC;QAC3ED,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDI,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACZ,EAAE,CAAC,CAAC;EAER,MAAM0B,oBAAoB,GAAIC,CAAC,IAAK;IAClC,MAAMC,KAAK,GAAGC,QAAQ,CAACF,CAAC,CAACG,MAAM,CAACF,KAAK,CAAC;IACtC,IAAIA,KAAK,GAAG,CAAC,EAAE;MACbtB,WAAW,CAACsB,KAAK,CAAC;IACpB;EACF,CAAC;EAED,MAAMG,eAAe,GAAGA,CAAA,KAAM;IAC5B7B,SAAS,CAACC,OAAO,EAAEE,QAAQ,CAAC;IAC5BJ,QAAQ,CAAC,OAAO,CAAC;EACnB,CAAC;EAED,IAAIM,OAAO,EAAE;IACX,oBACE9B,OAAA;MAAKuD,SAAS,EAAC,0CAA0C;MAAAC,QAAA,gBACvDxD,OAAA;QAAKuD,SAAS,EAAC;MAA8F;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACpH5D,OAAA;QAAGuD,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAkB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrD,CAAC;EAEV;EAEA,IAAIrD,KAAK,IAAI,CAACmB,OAAO,EAAE;IACrB,oBACE1B,OAAA;MAAKuD,SAAS,EAAC,8BAA8B;MAAAC,QAAA,eAC3CxD,OAAA;QAAKuD,SAAS,EAAC,oDAAoD;QAAAC,QAAA,gBACjExD,OAAA;UAAIuD,SAAS,EAAC,yBAAyB;UAAAC,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACnD5D,OAAA;UAAAwD,QAAA,EAAIjD,KAAK,IAAI;QAAiB;UAAAkD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACnC5D,OAAA,CAACJ,IAAI;UAACiE,EAAE,EAAC,WAAW;UAACN,SAAS,EAAC,mCAAmC;UAAAC,QAAA,EAAC;QAEnE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACE5D,OAAA;IAAKuD,SAAS,EAAC,6BAA6B;IAAAC,QAAA,gBAE1CxD,OAAA;MAAKuD,SAAS,EAAC,MAAM;MAAAC,QAAA,eACnBxD,OAAA;QAAKuD,SAAS,EAAC,MAAM;QAAC,cAAW,YAAY;QAAAC,QAAA,eAC3CxD,OAAA;UAAIuD,SAAS,EAAC,iDAAiD;UAAAC,QAAA,gBAC7DxD,OAAA;YAAIuD,SAAS,EAAC,0BAA0B;YAAAC,QAAA,eACtCxD,OAAA,CAACJ,IAAI;cAACiE,EAAE,EAAC,GAAG;cAACN,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EAAC;YAE3D;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eACL5D,OAAA;YAAAwD,QAAA,eACExD,OAAA;cAAKuD,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChCxD,OAAA;gBACEuD,SAAS,EAAC,uBAAuB;gBACjCO,IAAI,EAAC,cAAc;gBACnBC,OAAO,EAAC,WAAW;gBACnBC,KAAK,EAAC,4BAA4B;gBAAAR,QAAA,eAElCxD,OAAA;kBACEiE,QAAQ,EAAC,SAAS;kBAClBC,CAAC,EAAC,oHAAoH;kBACtHC,QAAQ,EAAC;gBAAS;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACb;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACN5D,OAAA,CAACJ,IAAI;gBAACiE,EAAE,EAAC,WAAW;gBAACN,SAAS,EAAC,gDAAgD;gBAAAC,QAAA,EAAC;cAEhF;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACL5D,OAAA;YAAAwD,QAAA,eACExD,OAAA;cAAKuD,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChCxD,OAAA;gBACEuD,SAAS,EAAC,uBAAuB;gBACjCO,IAAI,EAAC,cAAc;gBACnBC,OAAO,EAAC,WAAW;gBACnBC,KAAK,EAAC,4BAA4B;gBAAAR,QAAA,eAElCxD,OAAA;kBACEiE,QAAQ,EAAC,SAAS;kBAClBC,CAAC,EAAC,oHAAoH;kBACtHC,QAAQ,EAAC;gBAAS;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACb;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACN5D,OAAA,CAACJ,IAAI;gBACHiE,EAAE,EAAE,sBAAsBnC,OAAO,CAACY,UAAU,EAAG;gBAC/CiB,SAAS,EAAC,gDAAgD;gBAAAC,QAAA,EAEzD,EAAAlC,iBAAA,GAAAI,OAAO,CAAC0C,QAAQ,cAAA9C,iBAAA,uBAAhBA,iBAAA,CAAkB+C,IAAI,KAAI;cAAW;gBAAAZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACL5D,OAAA;YAAI,gBAAa,MAAM;YAAAwD,QAAA,eACrBxD,OAAA;cAAKuD,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChCxD,OAAA;gBACEuD,SAAS,EAAC,uBAAuB;gBACjCO,IAAI,EAAC,cAAc;gBACnBC,OAAO,EAAC,WAAW;gBACnBC,KAAK,EAAC,4BAA4B;gBAAAR,QAAA,eAElCxD,OAAA;kBACEiE,QAAQ,EAAC,SAAS;kBAClBC,CAAC,EAAC,oHAAoH;kBACtHC,QAAQ,EAAC;gBAAS;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACb;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACN5D,OAAA;gBAAMuD,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,EAAE9B,OAAO,CAAC2C;cAAI;gBAAAZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/D;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGN5D,OAAA;MAAKuD,SAAS,EAAC,+CAA+C;MAAAC,QAAA,eAC5DxD,OAAA;QAAKuD,SAAS,EAAC,SAAS;QAAAC,QAAA,gBACtBxD,OAAA;UAAKuD,SAAS,EAAC,UAAU;UAAAC,QAAA,eACvBxD,OAAA;YACEsE,GAAG,EAAE5C,OAAO,CAAC6C,QAAQ,IAAItE,aAAc;YACvCuE,GAAG,EAAE9C,OAAO,CAAC2C,IAAK;YAClBd,SAAS,EAAC;UAA4B;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACN5D,OAAA;UAAKuD,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BxD,OAAA;YAAIuD,SAAS,EAAC,uCAAuC;YAAAC,QAAA,EAAE9B,OAAO,CAAC2C;UAAI;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,EAExElC,OAAO,CAAC0C,QAAQ,iBACfpE,OAAA;YAAKuD,SAAS,EAAC,MAAM;YAAAC,QAAA,eACnBxD,OAAA;cAAMuD,SAAS,EAAC,uEAAuE;cAAAC,QAAA,EACpF9B,OAAO,CAAC0C,QAAQ,CAACC;YAAI;cAAAZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CACN,eAED5D,OAAA;YAAKuD,SAAS,EAAC,MAAM;YAAAC,QAAA,eACnBxD,OAAA;cAAMuD,SAAS,EAAC,kCAAkC;cAAAC,QAAA,GAAE9B,OAAO,CAAC+C,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,EAAC,SAAE;YAAA;cAAAjB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnF,CAAC,eAEN5D,OAAA;YAAKuD,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnBxD,OAAA;cAAIuD,SAAS,EAAC,0CAA0C;cAAAC,QAAA,EAAC;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACtE5D,OAAA;cAAGuD,SAAS,EAAC,eAAe;cAAAC,QAAA,EACzB9B,OAAO,CAACiD,WAAW,IAAI;YAA8B;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAGN5D,OAAA;YAAKuD,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnBxD,OAAA;cAAIuD,SAAS,EAAC,0CAA0C;cAAAC,QAAA,EAAC;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EAC1E,CAAC,MAAM;cACN,MAAMjD,MAAM,GAAGF,eAAe,CAACiB,OAAO,CAAChB,UAAU,CAAC;cAClD,MAAMkE,YAAY,GAAG;gBACnBC,GAAG,EAAE,wCAAwC;gBAC7CC,MAAM,EAAE,iDAAiD;gBACzDC,KAAK,EAAE,8CAA8C;gBACrDC,IAAI,EAAE;cACR,CAAC;cAED,oBACEhF,OAAA;gBAAKuD,SAAS,EAAE,wDAAwDqB,YAAY,CAACjE,MAAM,CAACE,KAAK,CAAC,EAAG;gBAAA2C,QAAA,gBACnGxD,OAAA;kBAAKuD,SAAS,EAAC,cAAc;kBAACO,IAAI,EAAC,cAAc;kBAACC,OAAO,EAAC,WAAW;kBAAAP,QAAA,eACnExD,OAAA;oBAAMiE,QAAQ,EAAC,SAAS;oBAACC,CAAC,EAAC,oHAAoH;oBAACC,QAAQ,EAAC;kBAAS;oBAAAV,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClK,CAAC,eACN5D,OAAA;kBAAMuD,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAE7C,MAAM,CAACC;gBAAI;kBAAA6C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/C,CAAC;YAEV,CAAC,EAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAEN5D,OAAA;YAAKuD,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnBxD,OAAA;cAAOiF,OAAO,EAAC,UAAU;cAAC1B,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAEnF;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR5D,OAAA;cAAKuD,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChCxD,OAAA;gBACEkF,IAAI,EAAC,QAAQ;gBACb3B,SAAS,EAAC,qGAAqG;gBAC/G4B,OAAO,EAAEA,CAAA,KAAMvD,QAAQ,GAAG,CAAC,IAAIC,WAAW,CAACD,QAAQ,GAAG,CAAC,CAAE;gBAAA4B,QAAA,EAC1D;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT5D,OAAA;gBACEkF,IAAI,EAAC,QAAQ;gBACb3D,EAAE,EAAC,UAAU;gBACb8C,IAAI,EAAC,UAAU;gBACfe,GAAG,EAAC,GAAG;gBACPjC,KAAK,EAAEvB,QAAS;gBAChByD,QAAQ,EAAEpC,oBAAqB;gBAC/BM,SAAS,EAAC;cAA4F;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvG,CAAC,eACF5D,OAAA;gBACEkF,IAAI,EAAC,QAAQ;gBACb3B,SAAS,EAAC,qGAAqG;gBAC/G4B,OAAO,EAAEA,CAAA,KAAMtD,WAAW,CAACD,QAAQ,GAAG,CAAC,CAAE;gBAAA4B,QAAA,EAC1C;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAEN5D,OAAA;YAAKuD,SAAS,EAAC,gBAAgB;YAAAC,QAAA,gBAC7BxD,OAAA;cACEkF,IAAI,EAAC,QAAQ;cACbC,OAAO,EAAE7B,eAAgB;cACzBC,SAAS,EAAC,gCAAgC;cAAAC,QAAA,EAC3C;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT5D,OAAA,CAACJ,IAAI;cAACiE,EAAE,EAAC,WAAW;cAACN,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAC;YAExD;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGL3B,eAAe,CAACqD,MAAM,GAAG,CAAC,iBACzBtF,OAAA;MAAKuD,SAAS,EAAC,OAAO;MAAAC,QAAA,gBACpBxD,OAAA;QAAIuD,SAAS,EAAC,uCAAuC;QAAAC,QAAA,EAAC;MAAc;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACzE5D,OAAA;QAAKuD,SAAS,EAAC,sDAAsD;QAAAC,QAAA,EAClEvB,eAAe,CAACsD,GAAG,CAACC,cAAc,iBACjCxF,OAAA;UAA6BuD,SAAS,EAAC,+CAA+C;UAAAC,QAAA,gBACpFxD,OAAA,CAACJ,IAAI;YAACiE,EAAE,EAAE,aAAa2B,cAAc,CAACjE,EAAE,EAAG;YAAAiC,QAAA,eACzCxD,OAAA;cAAKuD,SAAS,EAAC,uCAAuC;cAAAC,QAAA,eACpDxD,OAAA;gBACEsE,GAAG,EAAEkB,cAAc,CAACjB,QAAQ,IAAItE,aAAc;gBAC9CuE,GAAG,EAAEgB,cAAc,CAACnB,IAAK;gBACzBd,SAAS,EAAC;cAAuF;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClG;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACP5D,OAAA;YAAKuD,SAAS,EAAC,KAAK;YAAAC,QAAA,gBAClBxD,OAAA,CAACJ,IAAI;cAACiE,EAAE,EAAE,aAAa2B,cAAc,CAACjE,EAAE,EAAG;cAAAiC,QAAA,eACzCxD,OAAA;gBAAIuD,SAAS,EAAC,gFAAgF;gBAAAC,QAAA,EAC3FgC,cAAc,CAACnB;cAAI;gBAAAZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eACP5D,OAAA;cAAGuD,SAAS,EAAC,iCAAiC;cAAAC,QAAA,GAAEgC,cAAc,CAACf,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,EAAC,SAAE;YAAA;cAAAjB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnF,CAAC;QAAA,GAjBE4B,cAAc,CAACjE,EAAE;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAkBtB,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACvC,EAAA,CAxSID,iBAAiB;EAAA,QACN1B,SAAS,EACPC,WAAW;AAAA;AAAA8F,EAAA,GAFxBrE,iBAAiB;AA0SvB,eAAeA,iBAAiB;AAAC,IAAAqE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}