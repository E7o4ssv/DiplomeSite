# Как запустить приложение "Конфетти"

Для корректного запуска приложения следуйте этим инструкциям:

## Быстрый запуск

1. Выполните команду в терминале:
   ```bash
   ./start.sh
   ```

Это автоматически:
- Остановит все запущенные процессы Node.js
- Освободит порты 5001 и 3000
- Запустит сервер на порту 5001
- Запустит клиент на порту 3000

## Ручной запуск (если скрипт не работает)

1. Остановите все запущенные процессы Node.js:
   ```bash
   killall node
   ```

2. Убедитесь, что порт 5001 свободен:
   ```bash
   lsof -i:5001
   ```
   Если порт занят, освободите его:
   ```bash
   lsof -ti:5001 | xargs kill -9
   ```

3. Запустите сервер с фиксированным портом:
   ```bash
   npm run fixed-server
   ```

4. В другом терминале запустите клиент:
   ```bash
   cd client && npm start
   ```

## Данные для входа

- **Email**: admin@example.com
- **Пароль**: admin123

## Устранение неполадок

Если вы видите ошибку "Ошибка входа. Проверьте соединение с сервером":

1. Убедитесь, что сервер запущен на порту 5001
2. Проверьте соединение кнопкой "Диагностика соединения" на странице входа
3. Если сервер запущен на другом порту, компонент ConnectionStatus автоматически обнаружит его и обновит настройки

### Ошибка "Превышено количество попыток загрузки данных"

Если вы видите ошибку "Превышено количество попыток загрузки данных":

1. Это может быть вызвано проблемой с двойным путем API (например, /api/api/orders вместо /api/orders)
2. Убедитесь, что в файле client/src/utils/apiUtils.js правильно настроен baseURL:
   ```js
   axios.defaults.baseURL = `http://localhost:5001`;
   ```
   (без '/api' в конце)
3. Перезапустите и клиент, и сервер:
   ```bash
   pkill -f "node server/fixed-port.js"; 
   sleep 2; 
   node server/fixed-port.js > server.log 2>&1 &
   cd client && npm start
   ```

## Журналы и отладка

Журнал сервера сохраняется в файле `server.log` в корне проекта. 

Для диагностики проблем с API можете использовать:
```bash
curl http://localhost:5001/api/health
```

Если вы видите ответ вида `{"status":"healthy","database":"connected",...}`, то API работает корректно. 